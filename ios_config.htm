<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>雀魂iOS魔改</title>
</head>

<body>
    <label><input type="radio" name="type" id="_rocket" value="rocket" checked>ShadowRocket配置</label>
    <br />
    <label><input type="radio" name="type" value="quantumult">Quantumult配置</label>

    <hr />
    <label><input type="radio" name="proxy" id="_direct" value="2" checked>只魔改 不代理</label>
    <br />
    <label><input type="radio" name="proxy" value="3">魔改且代理</label>
    <hr />
    <label>麻将桌背景：
        <input type="text" id="bg" value="https://lietxia.github.io/res/005.png" /></label><br />
    如果想自己制作，可以下载<a href="res/bg.psd">这个photoshop源文件</a><br />
    再上传至<a href="https://sm.ms/">https://sm.ms</a> 取得URL填入这里
    <hr />
    <label>麻将牌样式：<select id="_pai">
            <option value="rose">红色+背面玫瑰花纹</option>
            <option value="0">【不修改】</option>
            <option value="black">玫瑰牌背双面黑</option>
            <option value="black2">双面纯黑</option>
            <option value="blue">蓝色</option>
            <option value="cyan">青色</option>
            <option value="dark">黑色</option>
            <option value="green">绿色</option>
            <option value="orange">橙色</option>
            <option value="pink">粉红</option>
            <option value="purple">紫色</option>
            <option value="red">红色</option>
            <option value="yellow">黄色</option>
            <option value="sakura">樱花牌背少女色(mumu制作)</option>
            <option value="saki2">saki2.0麻将牌（無聲鈴鹿制作）</option>
        </select></label>
    <hr />

    <label>改一姬语音：<select id="_yiji">
            <option value="0">【不修改】</option>
            <option value="qingshuigulonghua">清水谷龙华</option>
            <option value="songshixuan">松实玄</option>
            <option value="songshiyou">松实宥</option>
            <option value="fulumeisuizi">福路美穗子</option>
            <option value="gongyongxiao">宫永咲</option>
            <option value="longmenyuantouhua">龙门渕透华</option>
            <option value="mengnaizhenfan">梦乃真帆</option>
            <option value="tianjiangyi">天江衣</option>
            <option value="yuancunhe">原村和</option>
            <option value="zhujingjiu">竹井久</option>
            <option value="xuhejingtailang">须贺京太郎</option>
            <option value="gongyongzhao">宫永照</option>
            <option value="tengtianjingzi">藤田靖子</option>
            <option value="lusenzhuo">鹭森灼</option>
            <option value="xiaozoubachong">小走八重</option>
            <option value="jiangkouxi">江口夕</option>
            <option value="gaoyawennai">高鸭稳乃</option>
            <option value="xinzichong">新子憧</option>
            <option value="hongshijin">弘世堇</option>
            <option value="jiangqirenmei">江崎仁美（政治羊）</option>
            <option value="anheneimeizi">安河内美子</option>
            <option value="seguyaoshen">涩谷尧深（茶杯）</option>
            <option value="chituqinghui">赤土晴绘</option>
            <option value="yiyechengzi">亦野诚子</option>
            <option value="chuanjiubaohaozi">船久保浩子</option>
            <option value="daxingdan">大星淡</option>
            <option value="ertiaoquan">二条泉</option>
            <option value="huatianhuang">花田煌（好棒姐）</option>
            <option value="huangchuanqi">荒川憩</option>
        </select></label>
    <br />

    <label>二阶堂语音：<select id="_erjietang">
            <option value="0">【不修改】</option>
            <option value="qingshuigulonghua">清水谷龙华</option>
            <option value="songshixuan">松实玄</option>
            <option value="songshiyou">松实宥</option>
            <option value="fulumeisuizi">福路美穗子</option>
            <option value="gongyongxiao">宫永咲</option>
            <option value="longmenyuantouhua">龙门渕透华</option>
            <option value="mengnaizhenfan">梦乃真帆</option>
            <option value="tianjiangyi">天江衣</option>
            <option value="yuancunhe">原村和</option>
            <option value="zhujingjiu">竹井久</option>
            <option value="xuhejingtailang">须贺京太郎</option>
            <option value="gongyongzhao">宫永照</option>
            <option value="tengtianjingzi">藤田靖子</option>
            <option value="lusenzhuo">鹭森灼</option>
            <option value="xiaozoubachong">小走八重</option>
            <option value="jiangkouxi">江口夕</option>
            <option value="gaoyawennai">高鸭稳乃</option>
            <option value="xinzichong">新子憧</option>
            <option value="hongshijin">弘世堇</option>
            <option value="jiangqirenmei">江崎仁美（政治羊）</option>
            <option value="anheneimeizi">安河内美子</option>
            <option value="seguyaoshen">涩谷尧深（茶杯）</option>
            <option value="chituqinghui">赤土晴绘</option>
            <option value="yiyechengzi">亦野诚子</option>
            <option value="chuanjiubaohaozi">船久保浩子</option>
            <option value="daxingdan">大星淡</option>
            <option value="ertiaoquan">二条泉</option>
            <option value="huatianhuang">花田煌（好棒姐）</option>
            <option value="huangchuanqi">荒川憩</option>
        </select></label>
    <hr />

    <label>点数显示版：<select id="_point">
            <option value="white-black">透明黑+透明白</option>
            <option value="white">透明白</option>
            <option value="0">【不修改】</option>
        </select></label>
    <hr />
    <!--
    <label>修改立直棒：<select id="_riichi">
            <option value="black">黑</option>
            <option value="0">【不修改】</option>
        </select></label>
    <hr />
    -->
    <input type="button" onclick="RUN()" value="生成配置" />
    配置↓<br /><textarea id="out"></textarea>
</body>
<script>
    function RUN() {
        var outstr = "";

        if (document.getElementById("_rocket").checked) {
            if (document.getElementById("_direct").checked) {
                outstr = "# direct\n[General]\n\nbypass-system = true\n\nskip-proxy = 192.168.0.0/16, 10.0.0.0/8, 172.16.0.0/12, localhost, *.local, e.crashlytics.com, captive.apple.com\n\nbypass-tun = 10.0.0.0/8,100.64.0.0/10,127.0.0.0/8,169.254.0.0/16,172.16.0.0/12,192.0.0.0/24,192.0.2.0/24,192.88.99.0/24,192.168.0.0/16,198.18.0.0/15,198.51.100.0/24,203.0.113.0/24,224.0.0.0/4,255.255.255.255/32\n\ndns-server = \n\n[Rule]\n\nFINAL,DIRECT\n\n[Host]\n\nlocalhost = 127.0.0.1\n\n[URL Rewrite]\n";
            } else {
                outstr = "# proxy\n[General]\nbypass-system = true\nskip-proxy = 192.168.0.0/16, 10.0.0.0/8, 172.16.0.0/12, localhost, *.local, e.crashlytics.com, captive.apple.com\nbypass-tun = 10.0.0.0/8,100.64.0.0/10,127.0.0.0/8,169.254.0.0/16,172.16.0.0/12,192.0.0.0/24,192.0.2.0/24,192.88.99.0/24,192.168.0.0/16,198.18.0.0/15,198.51.100.0/24,203.0.113.0/24,224.0.0.0/4,255.255.255.255/32\ndns-server = \n\n\n[Rule]\nIP-CIDR,192.168.0.0/16,DIRECT\nIP-CIDR,10.0.0.0/8,DIRECT\nIP-CIDR,172.16.0.0/12,DIRECT\nIP-CIDR,127.0.0.0/8,DIRECT\nGEOIP,CN,DIRECT\nFINAL,PROXY\n\n[Host]\nlocalhost = 127.0.0.1\n\n[URL Rewrite]\n";
            }
        } else {
            if (document.getElementById("_direct").checked) {
                outstr = "[SERVER]\n\n[SOURCE]\n\n[BACKUP-SERVER]\n\n[SUSPEND-SSID]\n\n[POLICY]\n\n[DNS]\n\n[URL-REJECTION]\n\n[TCP]\nFINAL,DIRECT\n\n[GLOBAL]\n\n[HOST]\n\n[STATE]\nSTATE,AUTO\n\n[MITM]\n\n\n[REWRITE]\n";
            }
            else {
                outstr = "[SERVER]\n\n[SOURCE]\n\n[BACKUP-SERVER]\n\n[SUSPEND-SSID]\n\n[POLICY]\n\n[DNS]\n\n[URL-REJECTION]\n\n[TCP]\nHOST-SUFFIX,googleapis.com,PROXY,resolve-on-proxy\nHOST-SUFFIX,instagram.com,PROXY,resolve-on-proxy\nHOST-SUFFIX,cdninstagram.com,PROXY,resolve-on-proxy\nHOST-SUFFIX,fbcdn.net,PROXY,resolve-on-proxy\nHOST-SUFFIX,facebook.com,PROXY,resolve-on-proxy\nHOST-SUFFIX,fb.com,PROXY,resolve-on-proxy\nHOST-SUFFIX,gstatic.com,PROXY\nHOST-KEYWORD,google,PROXY,resolve-on-proxy\nIP-CIDR,10.0.0.0/8,DIRECT,no-resolve\nIP-CIDR,127.0.0.0/8,DIRECT,no-resolve\nIP-CIDR,172.16.0.0/12,DIRECT,no-resolve\nIP-CIDR,192.168.0.0/16,DIRECT,no-resolve\nGEOIP,CN,DIRECT\nFINAL,DIRECT\n\n[GLOBAL]\n\n[HOST]\n\n[STATE]\nSTATE,AUTO\n\n[MITM]\n\n\n[REWRITE]\n";
            }
        }

        var s_pai = document.getElementById("_pai").options[document.getElementById("_pai").selectedIndex].value;
        var s_yiji = document.getElementById("_yiji").options[document.getElementById("_yiji").selectedIndex].value;
        var s_erjietang = document.getElementById("_erjietang").options[document.getElementById("_erjietang").selectedIndex].value;
        var s_point = document.getElementById("_point").options[document.getElementById("_point").selectedIndex].value;
        //var s_riichi = document.getElementById("_riichi").options[document.getElementById("_riichi").selectedIndex].value;
        var bg = document.getElementById("bg").value.replace(/\s+/g, "");

        if (document.getElementById("_rocket").checked) {

            if (bg != "" && bg != null) {
                outstr += "^http(s?)://(majsoul)\\.union-game\\.com/0/[^/]+/scene/Assets/Resource/tablecloth/[^/]+/Table_Dif\\.jpg " + bg + " 302\n";
            }

            if (s_yiji != "0") {
                outstr += "^http(s?)://(majsoul)\\.union-game\\.com/0/[^\\/]+/audio/sound/yiji/act_(chi|pon|kan|ron|tumo|rich)\\.mp3 https://lietxia.github.io/sound/" + s_yiji + "/act_$3.mp3 302\n";
            }

            if (s_erjietang != "0") {
                outstr += "^http(s?)://(majsoul)\\.union-game\\.com/0/[^\\/]+/audio/sound/erjietang/act_(chi|pon|kan|ron|tumo|rich)\\.mp3 https://lietxia.github.io/sound/" + s_erjietang + "/act_$3.mp3 302\n";
            }

            if (s_point != "0") {
                outstr += "^http(s?)://(majsoul)\\.union-game\\.com/0/[^\\/]+/scene/Assets/Resource/table/tablemid/(.*\\.png) https://lietxia.github.io/board/" + s_point + "/$3 302\n";
            }
            /*
            if (s_riichi != "0") {
                outstr += "^http(s?)://(majsoul)\\.union-game\\.com/0/[^\\/]+/scene/Assets/Resource/table/box_color\\.png https://lietxia.github.io/riichi/" + s_riichi + "/box_color.png 302\n";
            }
            */

            if (s_pai != "0") {
                outstr += "^http(s?)://(majsoul)\\.union-game\\.com/0/[^/]+/(res/atlas/myres2/mjp|scene/Assets/Resource/mjpai)/[^/]+/(ui\\.png|hand\\.png|\\d[mpsz]\\.png) https://lietxia.github.io/dir/" + s_pai + "/$3/$4 302\n";
            }

        } else {
            if (bg != "" && bg != null) {
                outstr += "^http(s?)://(majsoul)\\.union-game\\.com/0/[^/]+/scene/Assets/Resource/tablecloth/[^/]+/Table_Dif\\.jpg url 302 " + bg + "\n";
            }

            if (s_yiji != "0") {
                outstr += "^http(s?)://(majsoul)\\.union-game\\.com/0/[^\\/]+/audio/sound/yiji/act_(chi|pon|kan|ron|tumo|rich)\\.mp3 url 302 https://lietxia.github.io/sound/" + s_yiji + "/act_$3.mp3\n";
            }

            if (s_erjietang != "0") {
                outstr += "^http(s?)://(majsoul)\\.union-game\\.com/0/[^\\/]+/audio/sound/erjietang/act_(chi|pon|kan|ron|tumo|rich)\\.mp3 url 302 https://lietxia.github.io/sound/" + s_erjietang + "/act_$3.mp3\n";
            }

            if (s_point != "0") {
                outstr += "^http(s?)://(majsoul)\\.union-game\\.com/0/[^\\/]+/scene/Assets/Resource/table/tablemid/(.*\\.png) url 302 https://lietxia.github.io/board/" + s_point + "/$3\n";
            }
            /*
            if (s_riichi != "0") {
                outstr += "^http(s?)://(majsoul)\\.union-game\\.com/0/[^\\/]+/scene/Assets/Resource/table/box_color\\.png url 302 https://lietxia.github.io/riichi/" + s_riichi + "/box_color.png\n";
            }
            */

            if (s_pai != "0") {
                outstr += "^http(s?)://(majsoul)\\.union-game\\.com/0/[^/]+/(res/atlas/myres2/mjp|scene/Assets/Resource/mjpai)/[^/]+/(ui\\.png|hand\\.png|\\d[mpsz]\\.png) url 302 https://lietxia.github.io/dir/" + s_pai + "/$3/$4\n";
            }

        }

        document.getElementById("out").value = outstr;
        /*
        console.log(s_pai);
        console.log(s_yiji);
        console.log(s_erjietang);
        console.log(s_point);
        console.log(s_riichi);
         火箭格式
        */

        /* quan格式
        gggg url 302 fggg
        */
    }
</script>

</html>